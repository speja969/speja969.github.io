<?xml version="1.0" encoding="utf-8" standalone="yes"?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom">
  <channel>
    <title>Radionica on Clarity</title>
    <link>https://speja969.github.io/categories/radionica/</link>
    <description>Recent content in Radionica on Clarity</description>
    <generator>Hugo -- gohugo.io</generator>
    <copyright>Copyright © 2020–, Peja Badzic &amp; Friends; all rights reserved.</copyright>
    <lastBuildDate>Thu, 04 Feb 2021 14:43:30 +0100</lastBuildDate><atom:link href="https://speja969.github.io/categories/radionica/index.xml" rel="self" type="application/rss+xml" />
    <item>
      <title>FFmpeg - 2. deo</title>
      <link>https://speja969.github.io/post/ffmpeg_2/</link>
      <pubDate>Thu, 04 Feb 2021 14:43:30 +0100</pubDate>
      
      <guid>https://speja969.github.io/post/ffmpeg_2/</guid>
      <description>
        
          &lt;hr&gt;
&lt;h2 id=&#34;_ffmpeg_---napredne-opcije&#34;&gt;&lt;strong&gt;&lt;em&gt;FFmpeg&lt;/em&gt; - napredne opcije&lt;/strong&gt;&lt;/h2&gt;
&lt;h4 id=&#34;preuzeto-odavdehttpsgistgithubcomprotroliume0dbd4bb0f1a396fcb55&#34;&gt;preuzeto &lt;a href=&#34;https://gist.github.com/protrolium/e0dbd4bb0f1a396fcb55&#34;&gt;odavde&lt;/a&gt;&lt;/h4&gt;
&lt;hr&gt;
&lt;hr&gt;
&lt;h3 id=&#34;converting-audio-into-different-formats--sample-rates&#34;&gt;&lt;strong&gt;Converting Audio into Different Formats / Sample Rates&lt;/strong&gt;&lt;/h3&gt;
&lt;hr&gt;
&lt;p&gt;Minimal example: transcode from MP3 to WMA:&lt;br&gt;&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span class=&#34;ln&#34;&gt;1&lt;/span&gt;ffmpeg -i input.mp3 output.wma
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;hr&gt;
&lt;p&gt;You can get the list of supported formats with:&lt;br&gt;&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span class=&#34;ln&#34;&gt;1&lt;/span&gt;ffmpeg -formats
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;hr&gt;
&lt;p&gt;You can get the list of installed codecs with:&lt;br&gt;&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span class=&#34;ln&#34;&gt;1&lt;/span&gt;ffmpeg -codecs
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;hr&gt;
&lt;p&gt;Convert WAV to MP3, mix down to mono (use 1 audio channel), set bit rate to 64 kbps and  sample rate to 22050 Hz:&lt;br&gt;&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span class=&#34;ln&#34;&gt;1&lt;/span&gt;ffmpeg -i input.wav -ac &lt;span class=&#34;m&#34;&gt;1&lt;/span&gt; -ab &lt;span class=&#34;m&#34;&gt;64000&lt;/span&gt; -ar &lt;span class=&#34;m&#34;&gt;22050&lt;/span&gt; output.mp3
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;hr&gt;
&lt;br&gt;
&lt;p&gt;Convert any MP3 file to WAV 16khz mono 16bit:&lt;br&gt;&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-fallback&#34; data-lang=&#34;fallback&#34;&gt;&lt;span class=&#34;ln&#34;&gt;1&lt;/span&gt;ffmpeg -i 111.mp3 -acodec pcm_s16le -ac 1 -ar 16000 out.wav
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;hr&gt;
&lt;p&gt;Convert any MP3 file to WAV 20khz mono 16bit for ADDAC WAV Player:&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span class=&#34;ln&#34;&gt;1&lt;/span&gt;ffmpeg -i 111.mp3 -acodec pcm_s16le -ac &lt;span class=&#34;m&#34;&gt;1&lt;/span&gt; -ar &lt;span class=&#34;m&#34;&gt;22050&lt;/span&gt; out.wav
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;hr&gt;
&lt;h4 id=&#34;cd-into-dir-for-batch-process&#34;&gt;&lt;strong&gt;cd into dir for batch process:&lt;/strong&gt;&lt;/h4&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span class=&#34;ln&#34;&gt;1&lt;/span&gt;&lt;span class=&#34;k&#34;&gt;for&lt;/span&gt; i in *.mp3&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;do&lt;/span&gt; ffmpeg -i &lt;span class=&#34;s2&#34;&gt;&amp;#34;&lt;/span&gt;&lt;span class=&#34;nv&#34;&gt;$i&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;&lt;/span&gt; -acodec pcm_s16le -ac &lt;span class=&#34;m&#34;&gt;1&lt;/span&gt; -ar &lt;span class=&#34;m&#34;&gt;22050&lt;/span&gt; &lt;span class=&#34;s2&#34;&gt;&amp;#34;&lt;/span&gt;&lt;span class=&#34;si&#34;&gt;${&lt;/span&gt;&lt;span class=&#34;nv&#34;&gt;i&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;%.mp3&lt;/span&gt;&lt;span class=&#34;si&#34;&gt;}&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;-encoded.wav&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;done&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;hr&gt;
&lt;p&gt;Picking the 30 seconds fragment at an offset of 1 minute:&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;In seconds:&lt;/strong&gt;&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span class=&#34;ln&#34;&gt;1&lt;/span&gt;ffmpeg -i input.mp3 -ss &lt;span class=&#34;m&#34;&gt;60&lt;/span&gt; -t &lt;span class=&#34;m&#34;&gt;30&lt;/span&gt; output.wav
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;&lt;strong&gt;In HH:MM:SS format:&lt;/strong&gt;&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span class=&#34;ln&#34;&gt;1&lt;/span&gt;ffmpeg -i input.mp3 -ss 0:01:00 -t 0:00:30 output.wav
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;hr&gt;
&lt;p&gt;Split an audio stream at specified segment rate (e.g. 3 seconds)&lt;br&gt;&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span class=&#34;ln&#34;&gt;1&lt;/span&gt;ffmpeg -i somefile.mp3 -f segment -segment_time &lt;span class=&#34;m&#34;&gt;3&lt;/span&gt; -c copy out%03d.mp3
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;hr&gt;
&lt;hr&gt;
&lt;h3 id=&#34;extract-audio&#34;&gt;&lt;strong&gt;Extract Audio:&lt;/strong&gt;&lt;/h3&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span class=&#34;ln&#34;&gt;1&lt;/span&gt;ffmpeg -i input-video.avi -vn -acodec copy output-audio.aac 
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;ul&gt;
&lt;li&gt;&lt;mark style=&#34;background-color: #50C7FF&#34;&gt;&lt;strong&gt;&lt;em&gt;vn&lt;/em&gt;&lt;/strong&gt;&lt;/mark&gt; is no video.&lt;/li&gt;
&lt;li&gt;&lt;mark style=&#34;background-color: #50C7FF&#34;&gt;&lt;strong&gt;&lt;em&gt;acodec&lt;/em&gt;&lt;/strong&gt;&lt;/mark&gt; copy says use the same audio stream that&#39;s already in there.&lt;/li&gt;
&lt;/ul&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span class=&#34;ln&#34;&gt;1&lt;/span&gt;ffmpeg -i video.mp4 -f mp3 -ab &lt;span class=&#34;m&#34;&gt;192000&lt;/span&gt; -vn music.mp3
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;ul&gt;
&lt;li&gt;The &lt;mark style=&#34;background-color: #50C7FF&#34;&gt;&lt;em&gt;&lt;strong&gt;-i&lt;/strong&gt;&lt;/em&gt;&lt;/mark&gt; option in the above command is simple: it is the path to the input file.&lt;/li&gt;
&lt;li&gt;The second option &lt;mark style=&#34;background-color: #50C7FF&#34;&gt;&lt;em&gt;&lt;strong&gt;-f&lt;/strong&gt;&lt;/em&gt;&lt;/mark&gt;  mp3 tells ffmpeg that the ouput is in mp3 format.&lt;/li&gt;
&lt;li&gt;The third option i.e &lt;mark style=&#34;background-color: #50C7FF&#34;&gt;&lt;em&gt;&lt;strong&gt;-ab 192000&lt;/strong&gt;&lt;/em&gt;&lt;/mark&gt; tells ffmpeg that we want the output to be encoded at 192Kbps and  &lt;mark style=&#34;background-color: #50C7FF&#34;&gt;&lt;em&gt;&lt;strong&gt;-vn&lt;/strong&gt;&lt;/em&gt;&lt;/mark&gt; tells ffmpeg that we dont want video.&lt;/li&gt;
&lt;li&gt;The last param is the name of the output file.&lt;/li&gt;
&lt;/ul&gt;
&lt;hr&gt;
&lt;hr&gt;
&lt;h3 id=&#34;replace-audio-on-a-video-without-re-encoding&#34;&gt;&lt;strong&gt;Replace Audio on a Video without re-encoding&lt;/strong&gt;&lt;/h3&gt;
&lt;hr&gt;
&lt;h5 id=&#34;preferred-method&#34;&gt;&lt;strong&gt;preferred method:&lt;/strong&gt;&lt;/h5&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span class=&#34;ln&#34;&gt;1&lt;/span&gt;ffmpeg -i INPUT.mp4 -i AUDIO.wav -shortest -c:v copy -c:a aac -b:a 256k OUTPUT.mp4
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;hr&gt;
&lt;p&gt;strip audio stream away from video&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span class=&#34;ln&#34;&gt;1&lt;/span&gt;ffmpeg -i INPUT.mp4 -codec copy -an OUTPUT.mp4
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;hr&gt;
&lt;p&gt;combine the two streams together (new audio with originally exisiting video)&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span class=&#34;ln&#34;&gt;1&lt;/span&gt;ffmpeg -i 36.MOV -i 36.wav -map 0:v -map 1:a -c copy -y 36-encoded.mov
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;hr&gt;
&lt;p&gt;or add an offset to audio&lt;br&gt;&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span class=&#34;ln&#34;&gt;1&lt;/span&gt;ffmpeg -i 36.MOV -itsoffset -0.25 -i 36.wav -map 0:v -map 1:a -c copy -y 36-encoded.mov
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;hr&gt;
&lt;hr&gt;
&lt;blockquote&gt;
&lt;p&gt;You say you want to &amp;quot;extract audio from them (mp3 or ogg)&amp;quot;.&lt;br&gt;
But what if the audio in the mp4 file is not one of those? you&#39;d have to transcode anyway.&lt;br&gt;
So why not leave the audio format detection up to ffmpeg?&lt;/p&gt;
&lt;p&gt;To convert one file:&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span class=&#34;ln&#34;&gt;1&lt;/span&gt;ffmpeg -i videofile.mp4 -vn -acodec libvorbis audiofile.ogg 
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;To convert many files:&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span class=&#34;ln&#34;&gt;1&lt;/span&gt;&lt;span class=&#34;k&#34;&gt;for&lt;/span&gt; vid in *.mp4&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;do&lt;/span&gt; ffmpeg -i &lt;span class=&#34;s2&#34;&gt;&amp;#34;&lt;/span&gt;&lt;span class=&#34;nv&#34;&gt;$vid&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;&lt;/span&gt; -vn -acodec libvorbis &lt;span class=&#34;s2&#34;&gt;&amp;#34;&lt;/span&gt;&lt;span class=&#34;si&#34;&gt;${&lt;/span&gt;&lt;span class=&#34;nv&#34;&gt;vid&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;%.mp4&lt;/span&gt;&lt;span class=&#34;si&#34;&gt;}&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;.ogg&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;done&lt;/span&gt; 
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;You can of course select any ffmpeg parameters for audio encoding that you like, to set things like bitrate and so on.&lt;/p&gt;
&lt;p&gt;Use &lt;mark style=&#34;background-color: #50C7FF&#34;&gt;&lt;em&gt;&lt;strong&gt;-acodec libmp3lame&lt;/strong&gt;&lt;/em&gt;&lt;/mark&gt;  and change the extension from &lt;mark style=&#34;background-color: #50C7FF&#34;&gt;&lt;em&gt;&lt;strong&gt;.ogg&lt;/strong&gt;&lt;/em&gt;&lt;/mark&gt; to  &lt;mark style=&#34;background-color: #50C7FF&#34;&gt;&lt;em&gt;&lt;strong&gt;.mp3&lt;/strong&gt;&lt;/em&gt;&lt;/mark&gt; for mp3 encoding.&lt;/p&gt;
&lt;p&gt;If what you want is to really extract the audio, you can simply &amp;quot;copy&amp;quot; the audio track to a file using -acodec copy. Of course, the main difference is that transcoding is slow and cpu-intensive, while copying is really quick as you&#39;re just moving bytes from one file to another. Here&#39;s how to copy just the audio track (assuming it&#39;s in mp3 format):&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span class=&#34;ln&#34;&gt;1&lt;/span&gt;ffmpeg -i videofile.mp4 -vn -acodec copy audiofile.mp3 
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;Note that in this case, the audiofile format has to be consistent with what the container has (i.e. if the audio is AAC format, you have to say audiofile.aac). You can use the ffprobe command to see which formats you have, this may provide some information:&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span class=&#34;ln&#34;&gt;1&lt;/span&gt;&lt;span class=&#34;k&#34;&gt;for&lt;/span&gt; file in *&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;do&lt;/span&gt; ffprobe &lt;span class=&#34;nv&#34;&gt;$file&lt;/span&gt; 2&amp;gt;&lt;span class=&#34;p&#34;&gt;&amp;amp;&lt;/span&gt;&lt;span class=&#34;m&#34;&gt;1&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;|&lt;/span&gt;grep Audio&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;done&lt;/span&gt; 
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;A possible way to automatically parse the audio codec and name the audio file accordingly would be:&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span class=&#34;ln&#34;&gt;1&lt;/span&gt;&lt;span class=&#34;k&#34;&gt;for&lt;/span&gt; file in *mp4 *avi&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;do&lt;/span&gt; ffmpeg -i &lt;span class=&#34;s2&#34;&gt;&amp;#34;&lt;/span&gt;&lt;span class=&#34;nv&#34;&gt;$file&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;&lt;/span&gt; -vn -acodec copy &lt;span class=&#34;s2&#34;&gt;&amp;#34;&lt;/span&gt;&lt;span class=&#34;nv&#34;&gt;$file&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;&lt;/span&gt;.&lt;span class=&#34;sb&#34;&gt;`&lt;/span&gt;ffprobe &lt;span class=&#34;s2&#34;&gt;&amp;#34;&lt;/span&gt;&lt;span class=&#34;nv&#34;&gt;$file&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;&lt;/span&gt; 2&amp;gt;&lt;span class=&#34;p&#34;&gt;&amp;amp;&lt;/span&gt;&lt;span class=&#34;m&#34;&gt;1&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;|&lt;/span&gt;sed -rn &lt;span class=&#34;s1&#34;&gt;&amp;#39;s/.*Audio: (...), .*/\1/p&amp;#39;&lt;/span&gt;&lt;span class=&#34;sb&#34;&gt;`&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;done&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;Note that this command uses sed to parse output from ffprobe for each file, it assumes a 3-letter &amp;gt;audio codec name (e.g. mp3, ogg, aac) and will break with anything different.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;hr&gt;
&lt;p&gt;&lt;strong&gt;Encoding multiple files&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;You can use a Bash &amp;quot;for loop&amp;quot; to encode all files in a directory:&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span class=&#34;ln&#34;&gt;1&lt;/span&gt;mkdir newfiles
&lt;span class=&#34;ln&#34;&gt;2&lt;/span&gt;&lt;span class=&#34;k&#34;&gt;for&lt;/span&gt; f in *.m4a&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;do&lt;/span&gt; ffmpeg -i &lt;span class=&#34;s2&#34;&gt;&amp;#34;&lt;/span&gt;&lt;span class=&#34;nv&#34;&gt;$f&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;&lt;/span&gt; -codec:v copy -codec:a libmp3lame -q:a &lt;span class=&#34;m&#34;&gt;2&lt;/span&gt; newfiles/&lt;span class=&#34;s2&#34;&gt;&amp;#34;&lt;/span&gt;&lt;span class=&#34;si&#34;&gt;${&lt;/span&gt;&lt;span class=&#34;nv&#34;&gt;f&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;%.m4a&lt;/span&gt;&lt;span class=&#34;si&#34;&gt;}&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;.mp3&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;done&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;hr&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span class=&#34;ln&#34;&gt;1&lt;/span&gt;ffmpeg -i input.m4a -acodec libmp3lame -ab 128k output.mp3
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;m4a to mp3 conversion with ffmpeg and lame&lt;/p&gt;
&lt;hr&gt;
&lt;p&gt;A batch file version of the same command would be:&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span class=&#34;ln&#34;&gt;1&lt;/span&gt;&lt;span class=&#34;k&#34;&gt;for&lt;/span&gt; f in *.m4a&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;do&lt;/span&gt; ffmpeg -i &lt;span class=&#34;s2&#34;&gt;&amp;#34;&lt;/span&gt;&lt;span class=&#34;nv&#34;&gt;$f&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;&lt;/span&gt; -acodec libmp3lame -ab 256k &lt;span class=&#34;s2&#34;&gt;&amp;#34;&lt;/span&gt;&lt;span class=&#34;si&#34;&gt;${&lt;/span&gt;&lt;span class=&#34;nv&#34;&gt;f&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;%.m4a&lt;/span&gt;&lt;span class=&#34;si&#34;&gt;}&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;.mp3&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;done&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;hr&gt;
&lt;hr&gt;
&lt;h3 id=&#34;extract-single-image-from-a-video-at-specified-frame&#34;&gt;&lt;strong&gt;Extract Single Image from a Video at Specified Frame&lt;/strong&gt;&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;vf [ss][filename][outputFileName]&lt;br&gt;
where &lt;mark style=&#34;background-color: #50C7FF&#34;&gt;&lt;strong&gt;&lt;em&gt;vf&lt;/em&gt;&lt;/strong&gt;&lt;/mark&gt;  is a custom bash script as follows:&lt;/li&gt;
&lt;/ul&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span class=&#34;ln&#34;&gt;1&lt;/span&gt;ffmpeg -ss &lt;span class=&#34;nv&#34;&gt;$1&lt;/span&gt; -i &lt;span class=&#34;nv&#34;&gt;$2&lt;/span&gt; -qmin &lt;span class=&#34;m&#34;&gt;1&lt;/span&gt; -q:v &lt;span class=&#34;m&#34;&gt;1&lt;/span&gt; -qscale:v &lt;span class=&#34;m&#34;&gt;2&lt;/span&gt; -frames:v &lt;span class=&#34;m&#34;&gt;1&lt;/span&gt; -huffman optimal &lt;span class=&#34;nv&#34;&gt;$3&lt;/span&gt;.jpg
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;ul&gt;
&lt;li&gt;&lt;mark style=&#34;background-color: #50C7FF&#34;&gt;&lt;em&gt;&lt;strong&gt;ss offset&lt;/strong&gt;&lt;/em&gt;&lt;/mark&gt; = frame number divided by FPS of video = the decimal (in milliseconds) ffmpeg needs i.e. 130.5&lt;br&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;hr&gt;
&lt;hr&gt;
&lt;h2 id=&#34;merge-multiple-videos&#34;&gt;Merge Multiple Videos&lt;/h2&gt;
&lt;hr&gt;
&lt;p&gt;concat demuxer&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span class=&#34;ln&#34;&gt;1&lt;/span&gt;$ cat mylist.txt
&lt;span class=&#34;ln&#34;&gt;2&lt;/span&gt;file &lt;span class=&#34;s1&#34;&gt;&amp;#39;/path/to/file1&amp;#39;&lt;/span&gt;
&lt;span class=&#34;ln&#34;&gt;3&lt;/span&gt;file &lt;span class=&#34;s1&#34;&gt;&amp;#39;/path/to/file2&amp;#39;&lt;/span&gt;
&lt;span class=&#34;ln&#34;&gt;4&lt;/span&gt;file &lt;span class=&#34;s1&#34;&gt;&amp;#39;/path/to/file3&amp;#39;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;div class=&#34;highlight&#34;&gt;&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span class=&#34;ln&#34;&gt;1&lt;/span&gt;$ ffmpeg -f concat -safe &lt;span class=&#34;m&#34;&gt;0&lt;/span&gt; -i mylist.txt -c copy output.mp
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;hr&gt;
&lt;h3 id=&#34;split-a-video-into-images&#34;&gt;&lt;strong&gt;Split a Video into Images&lt;/strong&gt;&lt;/h3&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span class=&#34;ln&#34;&gt;1&lt;/span&gt;ffmpeg -i video.flv image%d.jpg
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;hr&gt;
&lt;h3 id=&#34;convert-images-into-a-video&#34;&gt;&lt;strong&gt;Convert Images into a Video&lt;/strong&gt;&lt;/h3&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span class=&#34;ln&#34;&gt;1&lt;/span&gt;ffmpeg -f image2 -i image%d.jpg imagestovideo.mp4
&lt;span class=&#34;ln&#34;&gt;2&lt;/span&gt;ffmpeg -i image-%03d.png -c:v libx264 -pix_fmt yuv420p test.mp4
&lt;span class=&#34;ln&#34;&gt;3&lt;/span&gt;ffmpeg -r 1/5 -i image-%03d.png -c:v libx264 -vf &lt;span class=&#34;nv&#34;&gt;fps&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;m&#34;&gt;25&lt;/span&gt; -pix_fmt yuv420p test.mp4
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;hr&gt;
&lt;h3 id=&#34;convert-single-image-into-a-video&#34;&gt;&lt;strong&gt;Convert Single Image into a Video&lt;/strong&gt;&lt;/h3&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span class=&#34;ln&#34;&gt;1&lt;/span&gt;ffmpeg -loop &lt;span class=&#34;m&#34;&gt;1&lt;/span&gt; -i image.png -c:v libx264 -t &lt;span class=&#34;m&#34;&gt;60&lt;/span&gt; -pix_fmt yuv420p -vf &lt;span class=&#34;nv&#34;&gt;scale&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;1920:1080 out.mp4
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;hr&gt;
&lt;h3 id=&#34;convert-non-sequentially-named-images-in-a-directory&#34;&gt;&lt;strong&gt;Convert non-sequentially named Images in a directory&lt;/strong&gt;&lt;/h3&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span class=&#34;ln&#34;&gt;1&lt;/span&gt;$ ffmpeg -framerate &lt;span class=&#34;m&#34;&gt;30&lt;/span&gt; -pattern_type glob -i &lt;span class=&#34;s1&#34;&gt;&amp;#39;*.jpeg&amp;#39;&lt;/span&gt; -c:v libx264 -pix_fmt yuv420p gan-1.mov
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;hr&gt;
&lt;h3 id=&#34;convert-image-sequence-of-many-different-sizes-and-conform-to-specific-frame-size&#34;&gt;&lt;strong&gt;Convert image sequence of many different sizes and conform to specific frame size&lt;/strong&gt;&lt;/h3&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span class=&#34;ln&#34;&gt;1&lt;/span&gt;$ ffmpeg -i image-%04d.jpg -c:v libx264 -pix_fmt yuv420p -vf &lt;span class=&#34;s2&#34;&gt;&amp;#34;scale=max(1280\,a*720):max(1280\,720/a),crop=1280:720&amp;#34;&lt;/span&gt; test.mp4
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;hr&gt;
&lt;h3 id=&#34;guarantee-aspect-ratio-from-image-sequence&#34;&gt;&lt;strong&gt;Guarantee aspect ratio from image sequence&lt;/strong&gt;&lt;/h3&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span class=&#34;ln&#34;&gt;1&lt;/span&gt;$ ffmpeg -i image-%04d.jpg -c:v libx264 -pix_fmt yuv420p -vf &lt;span class=&#34;s2&#34;&gt;&amp;#34;scale=720:-2&amp;#34;&lt;/span&gt; test.mp4
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;hr&gt;
&lt;h3 id=&#34;evaluate-which-ratio-to-apply-for-scaling-then-scale-with-the-requisite-amount-of-padding&#34;&gt;&lt;strong&gt;Evaluate which ratio to apply for scaling, then scale with the requisite amount of padding&lt;/strong&gt;&lt;/h3&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span class=&#34;ln&#34;&gt;1&lt;/span&gt;$ ffmpeg -i image-%04d.jpg -c:v libx264 -pix_fmt yuv420p -vf &lt;span class=&#34;s2&#34;&gt;&amp;#34;scale=iw*min(1280/iw\,720/ih):ih*min(1280/iw\,720/ih), pad=1280:720:(1280-iw*min(1280/iw\,720/ih))/2:(720-ih*min(1280/iw\,720/ih))/2&amp;#34;&lt;/span&gt; test.mp4
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;&lt;strong&gt;1920 version:&lt;/strong&gt;&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span class=&#34;ln&#34;&gt;1&lt;/span&gt;$ ffmpeg -i image-%04d.jpg -c:v libx264 -pix_fmt yuv420p -vf &lt;span class=&#34;s2&#34;&gt;&amp;#34;scale=iw*min(1920/iw\,1080/ih):ih*min(1920/iw\,1080/ih), pad=1920:1080:(1920-iw*min(1920/iw\,1080/ih))/2:(1080-ih*min(1920/iw\,1080/ih))/2&amp;#34;&lt;/span&gt; test.mp4
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;hr&gt;
&lt;h3 id=&#34;convert-mov-jpeg-a-or-other-codec-to-h264-mp4&#34;&gt;&lt;strong&gt;Convert .mov (JPEG-A or other codec) to H264 .mp4&lt;/strong&gt;&lt;/h3&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span class=&#34;ln&#34;&gt;1&lt;/span&gt;ffmpeg -i input.mov -vcodec libx264 -pix_fmt yuv420p output.mp4
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;hr&gt;
&lt;h3 id=&#34;simple-flac-convert&#34;&gt;&lt;strong&gt;Simple FLAC convert&lt;/strong&gt;&lt;/h3&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span class=&#34;ln&#34;&gt;1&lt;/span&gt;ffmpeg -i audio.xxx -c:a flac audio.flac
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;hr&gt;
&lt;h3 id=&#34;mix-stereo-to-mono&#34;&gt;&lt;strong&gt;Mix Stereo to Mono&lt;/strong&gt;&lt;/h3&gt;
&lt;p&gt;You can modify a video file directly without having to re-encode the video stream.&lt;br&gt;
However the audio stream will have to be re-encoded.&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Left channel to mono:&lt;/strong&gt;&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span class=&#34;ln&#34;&gt;1&lt;/span&gt;ffmpeg -i video.mp4 -map_channel 0.1.0 -c:v copy mono.mp4
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;&lt;strong&gt;Left channel to stereo:&lt;/strong&gt;&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span class=&#34;ln&#34;&gt;1&lt;/span&gt;ffmpeg -i video.mp4 -map_channel 0.1.0 -map_channel 0.1.0 -c:v copy stereo.mp4
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;If you want to use the right channel, write   &lt;mark style=&#34;background-color: #50C7FF&#34;&gt;&lt;em&gt;&lt;strong&gt;0.1.1&lt;/strong&gt;&lt;/em&gt;&lt;/mark&gt; instead of  &lt;mark style=&#34;background-color: #50C7FF&#34;&gt;&lt;em&gt;&lt;strong&gt;0.1.0.&lt;/strong&gt;&lt;/em&gt;&lt;/mark&gt;&lt;/p&gt;
&lt;hr&gt;
&lt;h3 id=&#34;trim-end-of-file-mp3&#34;&gt;&lt;strong&gt;Trim End of file (mp3)&lt;/strong&gt;&lt;/h3&gt;
&lt;p&gt;Here&#39;s a command line that will slice to 30 seconds without transcoding:&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span class=&#34;ln&#34;&gt;1&lt;/span&gt;ffmpeg -t &lt;span class=&#34;m&#34;&gt;30&lt;/span&gt; -i inputfile.mp3 -acodec copy outputfile.mp3
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;hr&gt;
&lt;h3 id=&#34;to-encode-or-re-encode-&#34;&gt;&lt;strong&gt;To Encode or Re-encode ?&lt;/strong&gt;&lt;/h3&gt;
&lt;p&gt;Do you need to cut video with re-encoding or without re-encoding mode? You can try to following below command.&lt;br&gt;
Synopsis: &lt;em&gt;&lt;strong&gt;ffmpeg -i [input_file] -ss [start_seconds] -t [duration_seconds] [output_file]&lt;/strong&gt;&lt;/em&gt;&lt;/p&gt;
&lt;hr&gt;
&lt;h4 id=&#34;use-ffmpeg-cut-mp4-video-without-re-encoding&#34;&gt;&lt;strong&gt;use ffmpeg cut mp4 video without re-encoding&lt;/strong&gt;&lt;/h4&gt;
&lt;p&gt;Example:&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span class=&#34;ln&#34;&gt;1&lt;/span&gt;ffmpeg -i source.mp4 -ss 00:00:05 -t 00:00:10 -c copy cut_video.mp4
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;hr&gt;
&lt;h4 id=&#34;use-ffmpeg-cut-mp4-video-with-re-encoding&#34;&gt;&lt;strong&gt;use ffmpeg cut mp4 video with re-encoding&lt;/strong&gt;&lt;/h4&gt;
&lt;p&gt;Example:&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span class=&#34;ln&#34;&gt;1&lt;/span&gt;ffmpeg -i source.mp4 -ss 00:00:05 -t 00:00:10 -async &lt;span class=&#34;m&#34;&gt;1&lt;/span&gt; -strict -2 cut_video.mp4
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;If you want to cut off section from the beginning, simply drop -t 00:00:10 from the command&lt;/p&gt;
&lt;hr&gt;
&lt;h4 id=&#34;reduce-filesize&#34;&gt;&lt;strong&gt;reduce filesize&lt;/strong&gt;&lt;/h4&gt;
&lt;p&gt;Example:&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span class=&#34;ln&#34;&gt;1&lt;/span&gt;ffmpeg -i input.mov -vcodec libx264 -crf &lt;span class=&#34;m&#34;&gt;24&lt;/span&gt; output.mp4
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;It reduced a 100mb video to 9mb.. Very little change in video quality.&lt;/p&gt;
&lt;p&gt;Example:&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span class=&#34;ln&#34;&gt;1&lt;/span&gt;ffmpeg -i video.mov -vf &lt;span class=&#34;nv&#34;&gt;eq&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;nv&#34;&gt;saturation&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;m&#34;&gt;0&lt;/span&gt; -s 640x480 -c:v libx264 -crf &lt;span class=&#34;m&#34;&gt;24&lt;/span&gt; output.mp4
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;make a grayscale version and scale to 640x480&lt;/p&gt;
&lt;hr&gt;
&lt;h3 id=&#34;convert-mp4-to-webm&#34;&gt;&lt;strong&gt;Convert MP4 to WEBM&lt;/strong&gt;&lt;/h3&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span class=&#34;ln&#34;&gt;1&lt;/span&gt;ffmpeg -i input.mp4 -c:v libvpx-vp9 -crf &lt;span class=&#34;m&#34;&gt;31&lt;/span&gt; -b:v 1M output.webm
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;&lt;a href=&#34;http://trac.ffmpeg.org/wiki/Encode/VP9&#34;&gt;more info&lt;/a&gt;&lt;/p&gt;
&lt;hr&gt;
&lt;h3 id=&#34;convert-mkv-to-mp4&#34;&gt;&lt;strong&gt;Convert MKV to MP4&lt;/strong&gt;&lt;/h3&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span class=&#34;ln&#34;&gt;1&lt;/span&gt;ffmpeg -i file.mkv
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;check for streams that you want (video/audio). be sure to convert/specify DTS 6 channel audio stream&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span class=&#34;ln&#34;&gt;1&lt;/span&gt;ffmpeg -i input.mkv -strict experimental -map 0:0 -map 0:1 -c:v copy -c:a:1 libmp3lame -b:a 192k -ac &lt;span class=&#34;m&#34;&gt;6&lt;/span&gt; output.mp4
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;hr&gt;
&lt;h3 id=&#34;add-watermark-overlay-png-to-the-center-of-a-video&#34;&gt;&lt;strong&gt;Add Watermark overlay (png) to the center of a video&lt;/strong&gt;&lt;/h3&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span class=&#34;ln&#34;&gt;1&lt;/span&gt;ffmpeg -i source.mov -i watermark.png -filter_complex &lt;span class=&#34;s2&#34;&gt;&amp;#34;overlay=x=(main_w-overlay_w)/2:y=(main_h-overlay_h)/2&amp;#34;&lt;/span&gt; output.mp4
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;hr&gt;
&lt;h3 id=&#34;concat-a-video-with-a-reversed-copy-of-itself-for-ping-pong-looping-effect&#34;&gt;&lt;strong&gt;Concat a video with a reversed copy of itself for ping-pong looping effect&lt;/strong&gt;&lt;/h3&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span class=&#34;ln&#34;&gt;1&lt;/span&gt;ffmpeg -i input.mp4 -filter_complex &lt;span class=&#34;s2&#34;&gt;&amp;#34;[0:v]reverse,fifo[r];[0:v][r] concat=n=2:v=1 [v]&amp;#34;&lt;/span&gt; -map &lt;span class=&#34;s2&#34;&gt;&amp;#34;[v]&amp;#34;&lt;/span&gt; output.mp4
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;hr&gt;
&lt;hr&gt;
&lt;p&gt;more commands&lt;br&gt;
&lt;a href=&#34;http://www.catswhocode.com/blog/19-ffmpeg-commands-for-all-needs&#34;&gt;http://www.catswhocode.com/blog/19-ffmpeg-commands-for-all-needs&lt;/a&gt;&lt;/p&gt;

        
      </description>
    </item>
    
    <item>
      <title>FFmpeg </title>
      <link>https://speja969.github.io/post/ffmpeg_1/</link>
      <pubDate>Sun, 31 Jan 2021 14:43:30 +0100</pubDate>
      
      <guid>https://speja969.github.io/post/ffmpeg_1/</guid>
      <description>
        
          &lt;hr&gt;
&lt;h2 id=&#34;_ffmpeg_---konverzija-i-titlovi&#34;&gt;&lt;strong&gt;&lt;em&gt;FFmpeg&lt;/em&gt; - konverzija i titlovi&lt;/strong&gt;&lt;/h2&gt;
&lt;hr&gt;
&lt;hr&gt;
&lt;blockquote&gt;
&lt;p&gt;&lt;img src=&#34;https://speja969.github.io/img/ffmpeg_1/FFmpeg_logo_128.png&#34; alt=&#34;:left&#34;&gt;&lt;br&gt;
FFmpeg je moćno parče softvera sposobno da dekodira, enkodira, transkodira, strimuje, filtrira i pušta skoro sve poznate formate medijskih fajlova, počev od onih zastarelih pa do savrmenih tek uvedenih u primenu.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;ul&gt;
&lt;li&gt;Instalacija je jednostavna:&lt;/li&gt;
&lt;/ul&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span class=&#34;ln&#34;&gt;1&lt;/span&gt;sudo apt install ffmpeg
&lt;span class=&#34;ln&#34;&gt;2&lt;/span&gt;ffmpeg -formats &lt;span class=&#34;c1&#34;&gt;# formati koje podržava&lt;/span&gt;
&lt;span class=&#34;ln&#34;&gt;3&lt;/span&gt;ffmpeg -codecs  &lt;span class=&#34;c1&#34;&gt;# lista kodeka koje se instaliraju sa njim&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;Ja ću se ovde fokusirati na 2  slučaja zanimljiva običnim korisnicima:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Konverziju video i audio fajlova u smislu promene formata, bitrejta, rezolucije, tipa kompresije itd. , što smanjuje izlaznu veličinu ali uz gubitak kvaliteta prikaza.&lt;/li&gt;
&lt;li&gt;Ugrađivanje titlova u video fajlove, kao i lepljenje (&lt;em&gt;hardcoding&lt;/em&gt;) titlova prvenstveno srpske latinice i ćirilice. &lt;a href=&#34;#TITLOVI&#34;&gt;TITLOVI&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;Svuda u daljem tekstu &lt;strong&gt;CP1250&lt;/strong&gt; je oznaka za latinicu, a ako imamo ćirilični titl oznaka je &lt;strong&gt;CP1251&lt;/strong&gt;.&lt;/li&gt;
&lt;/ul&gt;
&lt;hr&gt;
&lt;h2 id=&#34;konverzija&#34;&gt;KONVERZIJA&lt;/h2&gt;
&lt;hr&gt;
&lt;p&gt;Da li vam se desilo da dođete u posed video ili audio snimka koji za svoju dužinu  ima neverovatnu veličinu.&lt;br&gt;
Običnom korisniku nije potreban preterani kvalitet klipa od 7 minuta koji ima 1 GB ili više.&lt;br&gt;
Treba naći kompromisno rešenje, a za to su nam potrebni parametri video fajla.&lt;br&gt;
Evo kako pomoću &lt;em&gt;FFprobe&lt;/em&gt; možemo dobiti parametre našeg testnog &lt;a href=&#34;https://www.countryvetclinic.com/wp-content/uploads/2019/05/Pexels-Videos-1321208.mp4&#34;&gt;fajla&lt;/a&gt;:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Rezoluciju:&lt;/li&gt;
&lt;/ul&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span class=&#34;ln&#34;&gt;1&lt;/span&gt;ffprobe -v error -select_streams v:0 -show_entries &lt;span class=&#34;nv&#34;&gt;stream&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;height,width -of &lt;span class=&#34;nv&#34;&gt;csv&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;nv&#34;&gt;s&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;x:p&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;m&#34;&gt;0&lt;/span&gt; https://www.countryvetclinic.com/wp-content/uploads/2019/05/Pexels-Videos-1321208.mp4
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;ul&gt;
&lt;li&gt;Broj frejmova u sekundi - &lt;em&gt;Frame Rate&lt;/em&gt;:&lt;/li&gt;
&lt;/ul&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span class=&#34;ln&#34;&gt;1&lt;/span&gt;ffprobe -v error -select_streams v:0 -show_entries &lt;span class=&#34;nv&#34;&gt;stream&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;avg_frame_rate -of &lt;span class=&#34;nv&#34;&gt;default&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;nv&#34;&gt;noprint_wrappers&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;1:nokey&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;m&#34;&gt;1&lt;/span&gt; https://www.countryvetclinic.com/wp-content/uploads/2019/05/Pexels-Videos-1321208.mp4
&lt;span class=&#34;ln&#34;&gt;2&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;# 30000/1001 je 30 fps&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;ul&gt;
&lt;li&gt;Veličinu fajla:&lt;/li&gt;
&lt;/ul&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span class=&#34;ln&#34;&gt;1&lt;/span&gt;ffprobe -v error -show_entries &lt;span class=&#34;nv&#34;&gt;format&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;size -of &lt;span class=&#34;nv&#34;&gt;default&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;nv&#34;&gt;noprint_wrappers&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;m&#34;&gt;1&lt;/span&gt; https://www.countryvetclinic.com/wp-content/uploads/2019/05/Pexels-Videos-1321208.mp4
&lt;span class=&#34;ln&#34;&gt;2&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;# dobijena vrednost je bajtima (za iznos u MB treba podeliti sa 1048576)&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;&lt;img src=&#34;https://speja969.github.io/img/ffmpeg_1/ffprobe.png&#34; alt=&#34;&#34;&gt;&lt;br&gt;
Kao što vidimo komande su dugačke i mada daju sliku o upotrebljivosti, njihova primena nije baš praktična. Mnogo jednostavnije je instalirati neki &lt;em&gt;GUI&lt;/em&gt; program, kao što je &lt;em&gt;mediaInfo-gui&lt;/em&gt;:&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span class=&#34;ln&#34;&gt;1&lt;/span&gt;sudo apt update &lt;span class=&#34;o&#34;&gt;&amp;amp;&amp;amp;&lt;/span&gt; sudo apt upgrade
&lt;span class=&#34;ln&#34;&gt;2&lt;/span&gt;sudo apt install mediainfo-gui
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;&lt;img src=&#34;https://speja969.github.io/img/ffmpeg_1/mediainfo-gui-plaza.png&#34; alt=&#34;&#34;&gt;&lt;/p&gt;
&lt;p&gt;Dakle naš &lt;a href=&#34;https://www.countryvetclinic.com/wp-content/uploads/2019/05/Pexels-Videos-1321208.mp4&#34;&gt;fajl&lt;/a&gt; ima ~58 MB, rezoluciju 3840x2160 i &lt;em&gt;Bitrate&lt;/em&gt; 22 Mb/s&lt;/p&gt;
&lt;h4 id=&#34;možemo-da-uradimo-sledeće&#34;&gt;&lt;strong&gt;Možemo da uradimo sledeće:&lt;/strong&gt;&lt;/h4&gt;
&lt;blockquote&gt;
&lt;ul&gt;
&lt;li&gt;Možemo da ga smanjimo kompresijom uz pomoć H265 kodeka:&lt;/li&gt;
&lt;/ul&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span class=&#34;ln&#34;&gt;1&lt;/span&gt;ffmpeg -i https://www.countryvetclinic.com/wp-content/uploads/2019/05/Pexels-Videos-1321208.mp4 -c:v libx265 -crf &lt;span class=&#34;m&#34;&gt;28&lt;/span&gt; output.mp4
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;Ovde koristimo &lt;em&gt;CRF (Constant Rate Factor)&lt;/em&gt; kao &lt;em&gt;default&lt;/em&gt; podešavanje kvaliteta i &lt;em&gt;bitrate&lt;/em&gt;-a. Više o tome &lt;a href=&#34;https://slhck.info/video/2017/02/24/crf-guide.html&#34;&gt;ovde&lt;/a&gt;.&lt;br&gt;
Ovim smo fajl smanjili: sa 57.8 na 48.6 MB, odnosno nekih ~20%:
&lt;img src=&#34;https://speja969.github.io/img/ffmpeg_1/mediainfo-gui-plaza-H265.png&#34; alt=&#34;&#34;&gt;&lt;/p&gt;
&lt;/blockquote&gt;
&lt;blockquote&gt;
&lt;ul&gt;
&lt;li&gt;Obzirom da naš &lt;a href=&#34;https://www.countryvetclinic.com/wp-content/uploads/2019/05/Pexels-Videos-1321208.mp4&#34;&gt;fajl&lt;/a&gt; ima &lt;em&gt;Bitrate&lt;/em&gt; 22 Mb/s, smanjimo ga na 10:&lt;/li&gt;
&lt;/ul&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span class=&#34;ln&#34;&gt;1&lt;/span&gt;ffmpeg -i https://www.countryvetclinic.com/wp-content/uploads/2019/05/Pexels-Videos-1321208.mp4 -b:v 10M -minrate 10M -maxrate 10M output.mp4
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;&lt;img src=&#34;https://speja969.github.io/img/ffmpeg_1/mediainfo-gui-plaza-bitrate.png&#34; alt=&#34;&#34;&gt;&lt;br&gt;
Smanjili smo veličinu fajla na 26 MB, ali po cenu vidljive degradacije kvaliteta.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;blockquote&gt;
&lt;ul&gt;
&lt;li&gt;Možemo da smanjimo rezoluciju na FullHD (1920x1080):&lt;/li&gt;
&lt;/ul&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span class=&#34;ln&#34;&gt;1&lt;/span&gt;ffmpeg -i https://www.countryvetclinic.com/wp-content/uploads/2019/05/Pexels-Videos-1321208.mp4 -vf &lt;span class=&#34;nv&#34;&gt;scale&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;1920:1080,setsar&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;1:1 output.mp4
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;Dobijamo sledeće parametre:&lt;br&gt;
&lt;img src=&#34;https://speja969.github.io/img/ffmpeg_1/mediainfo-gui-plaza-rezolucija.png&#34; alt=&#34;&#34;&gt;&lt;/p&gt;
&lt;h6 id=&#34;tabela_16_9&#34;&gt;Evo tabele sa preporučenim rezolucijama za dijagonalu 16:9 &lt;/h6&gt;
&lt;/blockquote&gt;
&lt;hr&gt;
&lt;hr&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th style=&#34;text-align:center&#34;&gt;Best Choice:&lt;/th&gt;
&lt;th style=&#34;text-align:center&#34;&gt;2nd Best:&lt;/th&gt;
&lt;th style=&#34;text-align:center&#34;&gt;3rd Best:&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td style=&#34;text-align:center&#34;&gt;Multiples of 16&lt;/td&gt;
&lt;td style=&#34;text-align:center&#34;&gt;Multiples of 8&lt;/td&gt;
&lt;td style=&#34;text-align:center&#34;&gt;Multiples of 4&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&#34;text-align:center&#34;&gt;1920 x 1080&lt;/td&gt;
&lt;td style=&#34;text-align:center&#34;&gt;1792 x 1008&lt;/td&gt;
&lt;td style=&#34;text-align:center&#34;&gt;1856 x 1044&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&#34;text-align:center&#34;&gt;1280 x 720&lt;/td&gt;
&lt;td style=&#34;text-align:center&#34;&gt;1152 x 648&lt;/td&gt;
&lt;td style=&#34;text-align:center&#34;&gt;1216 x 684&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&#34;text-align:center&#34;&gt;1024 x 576&lt;/td&gt;
&lt;td style=&#34;text-align:center&#34;&gt;896 x 504&lt;/td&gt;
&lt;td style=&#34;text-align:center&#34;&gt;1088 x 612&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&#34;text-align:center&#34;&gt;768 x 432&lt;/td&gt;
&lt;td style=&#34;text-align:center&#34;&gt;640 x 360&lt;/td&gt;
&lt;td style=&#34;text-align:center&#34;&gt;960 x 540&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&#34;text-align:center&#34;&gt;512 x 288&lt;/td&gt;
&lt;td style=&#34;text-align:center&#34;&gt;384 x 216&lt;/td&gt;
&lt;td style=&#34;text-align:center&#34;&gt;832 x 468&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&#34;text-align:center&#34;&gt;256 x 144&lt;/td&gt;
&lt;td style=&#34;text-align:center&#34;&gt;128 x 72&lt;/td&gt;
&lt;td style=&#34;text-align:center&#34;&gt;704 x 396&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&#34;text-align:center&#34;&gt;&lt;/td&gt;
&lt;td style=&#34;text-align:center&#34;&gt;&lt;/td&gt;
&lt;td style=&#34;text-align:center&#34;&gt;576 x 324&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&#34;text-align:center&#34;&gt;&lt;/td&gt;
&lt;td style=&#34;text-align:center&#34;&gt;&lt;/td&gt;
&lt;td style=&#34;text-align:center&#34;&gt;448 x 252&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&#34;text-align:center&#34;&gt;&lt;/td&gt;
&lt;td style=&#34;text-align:center&#34;&gt;&lt;/td&gt;
&lt;td style=&#34;text-align:center&#34;&gt;320 x 180&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&#34;text-align:center&#34;&gt;&lt;/td&gt;
&lt;td style=&#34;text-align:center&#34;&gt;&lt;/td&gt;
&lt;td style=&#34;text-align:center&#34;&gt;192 x 108&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;h4 id=&#34;zaključak&#34;&gt;&lt;strong&gt;Zaključak:&lt;/strong&gt;&lt;/h4&gt;
&lt;p&gt;Na svakom od nas je da proceni koliki gubitak kvaliteta mu je prihvatljiv kad zadaje izlazne parametre.&lt;br&gt;
Evo predloga kako bi to moglo da se uradi kombinujući više operacija u istoj komandi.&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span class=&#34;ln&#34;&gt;1&lt;/span&gt;ffmpeg -i https://www.countryvetclinic.com/wp-content/uploads/2019/05/Pexels-Videos-1321208.mp4 -vf &lt;span class=&#34;nv&#34;&gt;scale&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;1920:1080,setsar&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;1:1 -b:v 15M -minrate 13M -maxrate 16M -c:v libx265 -crf &lt;span class=&#34;m&#34;&gt;28&lt;/span&gt; output.mp4
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h2 id=&#34;TITLOVI&#34;&gt;&lt;img src=&#34;https://speja969.github.io/img/ffmpeg_1/mediainfo-gui-plaza-sve.png&#34; alt=&#34;&#34;&gt;&lt;/h2&gt;
&lt;h2 id=&#34;_titlovi_&#34;&gt;&lt;strong&gt;&lt;em&gt;TITLOVI&lt;/em&gt;&lt;/strong&gt;&lt;/h2&gt;
&lt;hr&gt;
&lt;p&gt;Neka nam testni fajl bude &lt;a href=&#34;https://vimeo.com/311038206&#34;&gt;&lt;em&gt;Auntie Edna&lt;/em&gt;&lt;/a&gt;.&lt;br&gt;
Ako još niste instalirali/ažurirali &lt;em&gt;youtube-dl&lt;/em&gt; evo komande:&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span class=&#34;ln&#34;&gt;1&lt;/span&gt;sudo apt-get remove -y youtube-dl &lt;span class=&#34;o&#34;&gt;&amp;amp;&amp;amp;&lt;/span&gt; sudo wget https://yt-dl.org/downloads/latest/youtube-dl -O /usr/local/bin/youtube-dl &lt;span class=&#34;o&#34;&gt;&amp;amp;&amp;amp;&lt;/span&gt; sudo chmod a+rx /usr/local/bin/youtube-dl
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;daunlodujmo Ednu u maksimalnoj ponuđenoj rezoluciji (1728x1080):&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span class=&#34;ln&#34;&gt;1&lt;/span&gt;&lt;span class=&#34;nb&#34;&gt;cd&lt;/span&gt; /folder/gde/vrsimo/konverziju
&lt;span class=&#34;ln&#34;&gt;2&lt;/span&gt;youtube-dl -F https://vimeo.com/311038206
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;Dobićemo ovako nešto:&lt;br&gt;
&lt;img src=&#34;https://speja969.github.io/img/ffmpeg_1/youtube-dl.png&#34; alt=&#34;&#34;&gt;&lt;br&gt;
Izaberemo jednu od ponuđenih opcija sa najvećom rezolucijom (ja sam uzeo poslednju):&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span class=&#34;ln&#34;&gt;1&lt;/span&gt;youtube-dl -f dash-fastly_skyfire-video-1197402664 https://vimeo.com/311038206
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;Sad skinimo titl &lt;a href=&#34;https://titlovi.com/titlovi/auntie-edna-318598/&#34;&gt;odavde&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;Imamo video fajl (&lt;em&gt;Auntie Edna-311038206.mp4&lt;/em&gt;) i titl (Auntie.Edna.2018.720p.BluRay.x264-[YTS.AM].srt) koje ćemo preimenovati u &lt;strong&gt;&lt;em&gt;Auntie_Edna.mp4&lt;/em&gt;&lt;/strong&gt; i &lt;strong&gt;&lt;em&gt;titl.srt&lt;/em&gt;&lt;/strong&gt;.&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span class=&#34;ln&#34;&gt;1&lt;/span&gt;mv &lt;span class=&#34;s1&#34;&gt;&amp;#39;Auntie Edna-311038206.mp4&amp;#39;&lt;/span&gt; Auntie_Edna.mp4
&lt;span class=&#34;ln&#34;&gt;2&lt;/span&gt;mv Auntie.Edna.2018.720p.BluRay.x264-&lt;span class=&#34;o&#34;&gt;[&lt;/span&gt;YTS.AM&lt;span class=&#34;o&#34;&gt;]&lt;/span&gt;.srt titl.srt
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;hr&gt;
&lt;h3 id=&#34;ugradićemo-titl-u-fajl-kao-njegov-sastavni-deo-bez-re-enkodiranja&#34;&gt;&lt;strong&gt;Ugradićemo titl u fajl kao njegov sastavni deo bez re-enkodiranja:&lt;/strong&gt;&lt;/h3&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span class=&#34;ln&#34;&gt;1&lt;/span&gt;ffmpeg -i Auntie_Edna.mp4 -sub_charenc CP1250 -i titl.srt -map 0:v -map 0:a -c copy -map &lt;span class=&#34;m&#34;&gt;1&lt;/span&gt; -c:s:0 mov_text -metadata:s:s:0 &lt;span class=&#34;nv&#34;&gt;language&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;srp Auntie_Edna_sa_titlom.mp4
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;hr&gt;
&lt;ol&gt;
&lt;li&gt;
&lt;p&gt;U fajl &lt;em&gt;Auntie_Edna_sa_titlom.mp4&lt;/em&gt; je ugrađen titl uz audio i video komponentu:&lt;br&gt;
&lt;img src=&#34;https://speja969.github.io/img/ffmpeg_1/ugradjen_titl.png&#34; alt=&#34;mediainfo-gui&#34; title=&#34;mediainfo-gui&#34;&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Ugrađivanje titla u &lt;em&gt;&lt;strong&gt;mkv&lt;/strong&gt;&lt;/em&gt; fajl:&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-fallback&#34; data-lang=&#34;fallback&#34;&gt;&lt;span class=&#34;ln&#34;&gt;1&lt;/span&gt;ffmpeg -i input.mkv -sub_charenc CP1250 -i subtitle.srt -map 0:v -map 0:a -c copy -map 1 -c:s:0 srt -metadata:s:s:0 language=srp output.mkv
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Ili ugrađivanje više titlova u &lt;em&gt;&lt;strong&gt;mkv&lt;/strong&gt;&lt;/em&gt; fajl:&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span class=&#34;ln&#34;&gt;1&lt;/span&gt;ffmpeg -i input.mp4       -i subtitle_eng.srt -i subtitle_fre.srt &lt;span class=&#34;se&#34;&gt;\
&lt;/span&gt;&lt;span class=&#34;ln&#34;&gt;2&lt;/span&gt;&lt;span class=&#34;se&#34;&gt;&lt;/span&gt;       -map 0:v -map 0:a  -map &lt;span class=&#34;m&#34;&gt;1&lt;/span&gt;              -map &lt;span class=&#34;m&#34;&gt;2&lt;/span&gt;              &lt;span class=&#34;se&#34;&gt;\
&lt;/span&gt;&lt;span class=&#34;ln&#34;&gt;3&lt;/span&gt;&lt;span class=&#34;se&#34;&gt;&lt;/span&gt;       -c:v copy -c:a copy -c:s copy                              &lt;span class=&#34;se&#34;&gt;\
&lt;/span&gt;&lt;span class=&#34;ln&#34;&gt;4&lt;/span&gt;&lt;span class=&#34;se&#34;&gt;&lt;/span&gt;       -metadata:s:s:0 &lt;span class=&#34;nv&#34;&gt;language&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;eng -metadata:s:s:1 &lt;span class=&#34;nv&#34;&gt;language&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;fre  &lt;span class=&#34;se&#34;&gt;\
&lt;/span&gt;&lt;span class=&#34;ln&#34;&gt;5&lt;/span&gt;&lt;span class=&#34;se&#34;&gt;&lt;/span&gt;  output.mkv
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/li&gt;
&lt;/ol&gt;
&lt;h3 id=&#34;nalepićemo-titl-na-video-kao-sastavni-deo-slike-uz-re-enkodiranje&#34;&gt;&lt;strong&gt;Nalepićemo titl na video kao sastavni deo slike uz re-enkodiranje:&lt;/strong&gt;&lt;/h3&gt;
&lt;ol&gt;
&lt;li&gt;
&lt;p&gt;Titl žute boje,sa transparentnom pozadinom, font Arial 24, testni fajl promenjen u &lt;em&gt;&lt;strong&gt;Auntie.Edna.2018.1080p.BluRay.x264-[YTS.AM].mp4&lt;/strong&gt;&lt;/em&gt;:&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span class=&#34;ln&#34;&gt;1&lt;/span&gt;ffmpeg -i Auntie.Edna.2018.1080p.BluRay.x264-&lt;span class=&#34;o&#34;&gt;[&lt;/span&gt;YTS.AM&lt;span class=&#34;o&#34;&gt;]&lt;/span&gt;.mp4 -vf &lt;span class=&#34;s2&#34;&gt;&amp;#34;subtitles=titl.srt:charenc=CP1250:force_style=&amp;#39;Fontname=Arial,Fontsize=24,OutlineColour=&amp;amp;H100000000,Outline=1,Alignment=2,Shadow=1,PrimaryColour=&amp;amp;H0000FFFF&amp;#39;&amp;#34;&lt;/span&gt; Auntie-Edna.mp4
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;&lt;img src=&#34;https://speja969.github.io/img/ffmpeg_1/Edna-1.png&#34; alt=&#34;&#34;&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Titl isti kao u prethodnom slučaju ali sa crnom pozadinom:&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span class=&#34;ln&#34;&gt;1&lt;/span&gt;ffmpeg -i Auntie.Edna.2018.1080p.BluRay.x264-&lt;span class=&#34;o&#34;&gt;[&lt;/span&gt;YTS.AM&lt;span class=&#34;o&#34;&gt;]&lt;/span&gt;.mp4 -vf &lt;span class=&#34;s2&#34;&gt;&amp;#34;subtitles=titl.srt:charenc=CP1250:force_style=&amp;#39;Fontname=Arial,Fontsize=24,OutlineColour=&amp;amp;H100000000,Outline=1,BorderStyle=3,Alignment=2,Shadow=1,PrimaryColour=&amp;amp;H0000FFFF&amp;#39;&amp;#34;&lt;/span&gt; Auntie--Edna.mp4
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;&lt;img src=&#34;https://speja969.github.io/img/ffmpeg_1/Edna-2.png&#34; alt=&#34;&#34;&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Crna boja je u redu ako je na fajl već nalepljen neki strani titl koji odvlači pažnju. Obično to nije tako drastično, pa vizuelno više prija polutransparentna pozadina:&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span class=&#34;ln&#34;&gt;1&lt;/span&gt;ffmpeg -i Auntie.Edna.2018.1080p.BluRay.x264-&lt;span class=&#34;o&#34;&gt;[&lt;/span&gt;YTS.AM&lt;span class=&#34;o&#34;&gt;]&lt;/span&gt;.mp4 -vf &lt;span class=&#34;s2&#34;&gt;&amp;#34;subtitles=titl.srt:charenc=CP1250:force_style=&amp;#39;BackColour=&amp;amp;H80000000,Fontname=Arial,Fontsize=22,OutlineColour=&amp;amp;H100000000,Outline=1,BorderStyle=4,Alignment=2,Shadow=1,PrimaryColour=&amp;amp;H0000FFFF&amp;#39;&amp;#34;&lt;/span&gt; Auntie__Edna.mp4
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;&lt;img src=&#34;https://speja969.github.io/img/ffmpeg_1/Edna-22.png&#34; alt=&#34;&#34;&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Transparentna pozadina titlova + enkodirano &lt;em&gt;-crf 28 u x265&lt;/em&gt;;&lt;br&gt;
fajl smanjen sa &lt;strong&gt;84 na 29&lt;/strong&gt; MB:&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span class=&#34;ln&#34;&gt;1&lt;/span&gt;ffmpeg -i Auntie.Edna.2018.1080p.BluRay.x264-&lt;span class=&#34;o&#34;&gt;[&lt;/span&gt;YTS.AM&lt;span class=&#34;o&#34;&gt;]&lt;/span&gt;.mp4 -vf &lt;span class=&#34;s2&#34;&gt;&amp;#34;subtitles=titl.srt:charenc=CP1250:force_style=&amp;#39;Fontname=Arial,Fontsize=24,OutlineColour=&amp;amp;H100000000,Outline=1,Alignment=2,Shadow=1,PrimaryColour=&amp;amp;H0000FFFF&amp;#39;&amp;#34;&lt;/span&gt; -c:v libx265 -crf &lt;span class=&#34;m&#34;&gt;28&lt;/span&gt; Auntie---Edna.mp4
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;&lt;img src=&#34;https://speja969.github.io/img/ffmpeg_1/Edna-3.png&#34; alt=&#34;&#34;&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Prethodne operacije smo obavljali ostavljajući nepromenjenu rezoluciju  &lt;em&gt;1920x808&lt;/em&gt; što odgovara dijagonali (&lt;em&gt;Aspect Ratio&lt;/em&gt;) od &lt;strong&gt;2,4:1&lt;/strong&gt;.&lt;br&gt;
Vidimo iz predloženih &lt;a href=&#34;#tabela_16_9&#34;&gt;rezolucija&lt;/a&gt; da FFmpeg &amp;quot;voli&amp;quot; standardni odnos &lt;strong&gt;16:9&lt;/strong&gt;.&lt;br&gt;
Evo kako bi smo skalirali naš video fajl sa 1920x808 [A.R - 2.40:1] na 1280:720 [A.R. - 16:9] uz zadržavanje proporcija slike, dakle popunjavanje praznog prostora crnim trakama:&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span class=&#34;ln&#34;&gt;1&lt;/span&gt;ffmpeg -i Auntie.Edna.2018.1080p.BluRay.x264-&lt;span class=&#34;o&#34;&gt;[&lt;/span&gt;YTS.AM&lt;span class=&#34;o&#34;&gt;]&lt;/span&gt;.mp4 -vf &lt;span class=&#34;s2&#34;&gt;&amp;#34;scale=1280:720:force_original_aspect_ratio=decrease,pad=1280:720:(ow-iw)/2:(oh-ih)/2,setsar=1&amp;#34;&lt;/span&gt; Auntie.-.Edna.mp4
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;&lt;img src=&#34;https://speja969.github.io/img/ffmpeg_1/skalirano_HD.png&#34; alt=&#34;&#34;&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Ako skaliranje na različitu rezoluciju iskombinujemo sa lepljenjem titlova, dobićemo:&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span class=&#34;ln&#34;&gt;1&lt;/span&gt;ffmpeg -i Auntie.Edna.2018.1080p.BluRay.x264-&lt;span class=&#34;o&#34;&gt;[&lt;/span&gt;YTS.AM&lt;span class=&#34;o&#34;&gt;]&lt;/span&gt;.mp4 -filter_complex &lt;span class=&#34;s2&#34;&gt;&amp;#34;scale=1280:720:force_original_aspect_ratio=decrease,pad=1280:720:-1:-1,setsar=1,subtitles=titl.srt:charenc=CP1250:force_style=&amp;#39;Fontname=Arial,Fontsize=20,OutlineColour=&amp;amp;H100000000,Outline=1,Alignment=2,Shadow=1,PrimaryColour=&amp;amp;H0000FFFF&amp;#39;[v]&amp;#34;&lt;/span&gt; -map &lt;span class=&#34;s2&#34;&gt;&amp;#34;[v]&amp;#34;&lt;/span&gt; -map 0:a -c:a copy Auntie-.-Edna.mp4
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;&lt;img src=&#34;https://speja969.github.io/img/ffmpeg_1/skalirano_titlovi.png&#34; alt=&#34;&#34;&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Ima tu još prostora ispod titla, hajde da maksimalno iskoristimo crnu traku:&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span class=&#34;ln&#34;&gt;1&lt;/span&gt;ffmpeg -i Auntie.Edna.2018.1080p.BluRay.x264-&lt;span class=&#34;o&#34;&gt;[&lt;/span&gt;YTS.AM&lt;span class=&#34;o&#34;&gt;]&lt;/span&gt;.mp4 -filter_complex &lt;span class=&#34;s2&#34;&gt;&amp;#34;scale=1280:720:force_original_aspect_ratio=decrease,pad=1280:720:-1:-1,setsar=1,subtitles=titl.srt:charenc=CP1250:force_style=&amp;#39;Fontname=Arial,Fontsize=20,OutlineColour=&amp;amp;H100000000,Outline=1,Alignment=2,MarginV=1,Shadow=1,PrimaryColour=&amp;amp;H0000FFFF&amp;#39;[v]&amp;#34;&lt;/span&gt; -map &lt;span class=&#34;s2&#34;&gt;&amp;#34;[v]&amp;#34;&lt;/span&gt; -map 0:a -c:a copy Auntie-..-Edna.mp4
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;&lt;img src=&#34;https://speja969.github.io/img/ffmpeg_1/skalirano_MarginV_1.png&#34; alt=&#34;&#34;&gt;&lt;/p&gt;
&lt;ol start=&#34;8&#34;&gt;
&lt;li&gt;Ako bi uz sve iz prethodne tačke dodali re-enkodiranje u H265 da bi smanjili veličinu fajla:
&lt;div class=&#34;highlight&#34;&gt;&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span class=&#34;ln&#34;&gt;1&lt;/span&gt;ffmpeg -i Auntie.Edna.2018.1080p.BluRay.x264-&lt;span class=&#34;o&#34;&gt;[&lt;/span&gt;YTS.AM&lt;span class=&#34;o&#34;&gt;]&lt;/span&gt;.mp4 -filter_complex &lt;span class=&#34;s2&#34;&gt;&amp;#34;scale=1280:720:force_original_aspect_ratio=decrease,pad=1280:720:-1:-1,setsar=1,subtitles=titl.srt:charenc=CP1250:force_style=&amp;#39;Fontname=Arial,Fontsize=20,OutlineColour=&amp;amp;H100000000,Outline=1,Alignment=2,MarginV=1,Shadow=1,PrimaryColour=&amp;amp;H0000FFFF&amp;#39;[v]&amp;#34;&lt;/span&gt; -map &lt;span class=&#34;s2&#34;&gt;&amp;#34;[v]&amp;#34;&lt;/span&gt; -map 0:a -c:a copy -c:v libx265 -crf &lt;span class=&#34;m&#34;&gt;28&lt;/span&gt; Auntie-Edna.mp4
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;&lt;img src=&#34;https://speja969.github.io/img/ffmpeg_1/skalirano_MarginV_1_H265.png&#34; alt=&#34;&#34;&gt;&lt;/p&gt;
&lt;ol start=&#34;9&#34;&gt;
&lt;li&gt;
&lt;p&gt;Kako bi recimo isekli deo fajla i na njega nalepili titl.&lt;br&gt;
Evo primera kako iz desete epizode šeste sezone &lt;em&gt;Game of Thrones&lt;/em&gt; izrenderovati titl na segment od &lt;strong&gt;00:57:14&lt;/strong&gt; do &lt;strong&gt;01:01:51&lt;/strong&gt; u kome &lt;em&gt;Lyanna Mormont&lt;/em&gt; drži istorijski govor Severnjacima:&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span class=&#34;ln&#34;&gt;1&lt;/span&gt;ffmpeg -ss 00:57:14 -to 01:01:51 -copyts -i GoT.S06E10.mkv -vf &lt;span class=&#34;s2&#34;&gt;&amp;#34;subtitles=GoT.S06E10.srt:charenc=CP1250:force_style=&amp;#39;Fontname=Arial,Fontsize=24,OutlineColour=&amp;amp;H100000000,Outline=1,Alignment=2,Shadow=1,PrimaryColour=&amp;amp;H0000FFFF&amp;#39;&amp;#34;&lt;/span&gt; -c:a copy -ss 00:57:14 -y king_in_the_north.mp4
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/li&gt;
&lt;/ol&gt;

&lt;div style=&#34;position: relative; padding-bottom: 56.25%; height: 0; overflow: hidden;&#34;&gt;
  &lt;iframe src=&#34;https://www.youtube.com/embed/my2r8tVEqsQ&#34; style=&#34;position: absolute; top: 0; left: 0; width: 100%; height: 100%; border:0;&#34; allowfullscreen title=&#34;YouTube Video&#34;&gt;&lt;/iframe&gt;
&lt;/div&gt;

&lt;pre&gt;&lt;code&gt; I to bi bilo to...
&lt;/code&gt;&lt;/pre&gt;

        
      </description>
    </item>
    
  </channel>
</rss>
